<svg xmlns="http://www.w3.org/2000/svg" width="1526" height="1040" viewBox="0 0 1526 1040">
<rect x="0" y="0" width="1526" height="1040" fill="#ffffff"/>
<style>
  .node { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; font-size: 12px; }
  .nlabel { dominant-baseline: middle; text-anchor: middle; }
  .edge { stroke: #111; stroke-width: 1.6; }
  .box { fill: #fff; stroke: #111; stroke-width: 1.4; rx: 6; }
  .small { font: 12px ui-sans-serif, system-ui }
  .tiny { font: 11px ui-sans-serif, system-ui }
  .title { font: 600 14px ui-sans-serif, system-ui }
</style>
<text x="16" y="28" class="title">countAllSubsequences sum==k (with L/R and execution notes)</text>
<rect class="box" x="16" y="40" width="900" height="78" />
<text x="26" y="60" class="small">At each node:</text>
<text x="42" y="78" class="tiny">Left (L) = include nums[i]  → recursive count from +nums[i]</text>
<text x="42" y="94" class="tiny">Right (R) = exclude nums[i] → recursive count from skipping nums[i]</text>
<text x="26" y="110" class="tiny">Return = L + R; base case: i==n returns 1 if sum==k else 0.</text>
<line class="edge" x1="672.0" y1="184" x2="312.0" y2="256"/>
<text class="tiny" x="492.0" y="214.0" text-anchor="middle">L:+1</text>
<line class="edge" x1="312.0" y1="304" x2="132.0" y2="376"/>
<text class="tiny" x="222.0" y="334.0" text-anchor="middle">L:+2</text>
<line class="edge" x1="132.0" y1="424" x2="42" y2="496"/>
<text class="tiny" x="87.0" y="454.0" text-anchor="middle">L:+1 ⇒ 0</text>
<line class="edge" x1="132.0" y1="424" x2="222" y2="496"/>
<text class="tiny" x="177.0" y="454.0" text-anchor="middle">R:skip ⇒ 0</text>
<line class="edge" x1="312.0" y1="304" x2="492.0" y2="376"/>
<text class="tiny" x="402.0" y="334.0" text-anchor="middle">R:skip</text>
<line class="edge" x1="492.0" y1="424" x2="402" y2="496"/>
<text class="tiny" x="447.0" y="454.0" text-anchor="middle">L:+1 ⇒ 0</text>
<line class="edge" x1="492.0" y1="424" x2="582" y2="496"/>
<text class="tiny" x="537.0" y="454.0" text-anchor="middle">R:skip ⇒ 1</text>
<line class="edge" x1="672.0" y1="184" x2="1032.0" y2="256"/>
<text class="tiny" x="852.0" y="214.0" text-anchor="middle">R:skip</text>
<line class="edge" x1="1032.0" y1="304" x2="852.0" y2="376"/>
<text class="tiny" x="942.0" y="334.0" text-anchor="middle">L:+2</text>
<line class="edge" x1="852.0" y1="424" x2="762" y2="496"/>
<text class="tiny" x="807.0" y="454.0" text-anchor="middle">L:+1 ⇒ 0</text>
<line class="edge" x1="852.0" y1="424" x2="942" y2="496"/>
<text class="tiny" x="897.0" y="454.0" text-anchor="middle">R:skip ⇒ 1</text>
<line class="edge" x1="1032.0" y1="304" x2="1212.0" y2="376"/>
<text class="tiny" x="1122.0" y="334.0" text-anchor="middle">R:skip</text>
<line class="edge" x1="1212.0" y1="424" x2="1122" y2="496"/>
<text class="tiny" x="1167.0" y="454.0" text-anchor="middle">L:+1 ⇒ 1</text>
<line class="edge" x1="1212.0" y1="424" x2="1302" y2="496"/>
<text class="tiny" x="1257.0" y="454.0" text-anchor="middle">R:skip ⇒ 1</text>
<rect class="box" x="572.0" y="137.0" width="200" height="46" />
<text class="node nlabel" x="672.0" y="152">i0, s0, S=[]</text>
<text class="tiny nlabel" x="672.0" y="170">L=1, R=1, ret=2</text>
<rect class="box" x="212.0" y="257.0" width="200" height="46" />
<text class="node nlabel" x="312.0" y="272">i1, s1, S=[1]</text>
<text class="tiny nlabel" x="312.0" y="290">L=0, R=1, ret=1</text>
<rect class="box" x="32.0" y="377.0" width="200" height="46" />
<text class="node nlabel" x="132.0" y="392">i2, s3, S=[1, 2]</text>
<text class="tiny nlabel" x="132.0" y="410">L=0, R=0, ret=0</text>
<rect class="box" x="-58.0" y="497.0" width="200" height="46" />
<text class="node nlabel" x="42" y="512">i3, s4, S=[1, 2, 1]</text>
<text class="tiny nlabel" x="42" y="530">ret 0</text>
<rect class="box" x="122.0" y="497.0" width="200" height="46" />
<text class="node nlabel" x="222" y="512">i3, s3, S=[1, 2]</text>
<text class="tiny nlabel" x="222" y="530">ret 0</text>
<rect class="box" x="392.0" y="377.0" width="200" height="46" />
<text class="node nlabel" x="492.0" y="392">i2, s1, S=[1]</text>
<text class="tiny nlabel" x="492.0" y="410">L=1, R=0, ret=1</text>
<rect class="box" x="302.0" y="497.0" width="200" height="46" />
<text class="node nlabel" x="402" y="512">i3, s2, S=[1, 1]</text>
<text class="tiny nlabel" x="402" y="530">ret 1</text>
<rect class="box" x="482.0" y="497.0" width="200" height="46" />
<text class="node nlabel" x="582" y="512">i3, s1, S=[1]</text>
<text class="tiny nlabel" x="582" y="530">ret 0</text>
<rect class="box" x="932.0" y="257.0" width="200" height="46" />
<text class="node nlabel" x="1032.0" y="272">i1, s0, S=[]</text>
<text class="tiny nlabel" x="1032.0" y="290">L=1, R=0, ret=1</text>
<rect class="box" x="752.0" y="377.0" width="200" height="46" />
<text class="node nlabel" x="852.0" y="392">i2, s2, S=[2]</text>
<text class="tiny nlabel" x="852.0" y="410">L=0, R=1, ret=1</text>
<rect class="box" x="662.0" y="497.0" width="200" height="46" />
<text class="node nlabel" x="762" y="512">i3, s3, S=[2, 1]</text>
<text class="tiny nlabel" x="762" y="530">ret 0</text>
<rect class="box" x="842.0" y="497.0" width="200" height="46" />
<text class="node nlabel" x="942" y="512">i3, s2, S=[2]</text>
<text class="tiny nlabel" x="942" y="530">ret 1</text>
<rect class="box" x="1112.0" y="377.0" width="200" height="46" />
<text class="node nlabel" x="1212.0" y="392">i2, s0, S=[]</text>
<text class="tiny nlabel" x="1212.0" y="410">L=0, R=0, ret=0</text>
<rect class="box" x="1022.0" y="497.0" width="200" height="46" />
<text class="node nlabel" x="1122" y="512">i3, s1, S=[1]</text>
<text class="tiny nlabel" x="1122" y="530">ret 0</text>
<rect class="box" x="1202.0" y="497.0" width="200" height="46" />
<text class="node nlabel" x="1302" y="512">i3, s0, S=[]</text>
<text class="tiny nlabel" x="1302" y="530">ret 0</text>
<rect class="box" x="16" y="848" width="1494" height="180" />
<text x="26" y="870" class="title">Example: nums=[1, 2, 1], k=2  |  Total count = 2</text>
<text x="26" y="890" class="small">Execution order: Depth-first. Each node computes L by including, then R by excluding, then returns L+R.</text>
<text x="26" y="910" class="small">Matching subsequences (counted at leaves): [1, 1], [2]</text>
</svg>